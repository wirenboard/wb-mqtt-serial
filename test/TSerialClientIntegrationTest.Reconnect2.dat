Subscribe: /devices/+/meta/driver (QoS 0)
Publish: /devices/reconnect-test-1/meta: '{"driver":"serial-client-integration-test","title":{"en":"Reconnect test 1"}}' (QoS 1, retained)
Publish: /devices/reconnect-test-1/meta/driver: 'serial-client-integration-test' (QoS 1, retained)
Publish: /devices/reconnect-test-1/meta/error: '' (QoS 1, retained)
Publish: /devices/reconnect-test-1/meta/name: 'Reconnect test 1' (QoS 1, retained)
Publish: /devices/reconnect-test-1/controls/I1/meta: '{"order":1,"readonly":false,"type":"value"}' (QoS 1, retained)
Publish: /devices/reconnect-test-1/controls/I1/meta/error: '' (QoS 1, retained)
Publish: /devices/reconnect-test-1/controls/I1/meta/order: '1' (QoS 1, retained)
Publish: /devices/reconnect-test-1/controls/I1/meta/readonly: '0' (QoS 1, retained)
Publish: /devices/reconnect-test-1/controls/I1/meta/type: 'value' (QoS 1, retained)
Publish: /devices/reconnect-test-1/controls/I1: '0' (QoS 1, retained)
Subscribe: /devices/reconnect-test-1/controls/I1/on (QoS 0)
Publish: /devices/reconnect-test-1/controls/I2/meta: '{"order":2,"readonly":false,"type":"value"}' (QoS 1, retained)
Publish: /devices/reconnect-test-1/controls/I2/meta/error: '' (QoS 1, retained)
Publish: /devices/reconnect-test-1/controls/I2/meta/order: '2' (QoS 1, retained)
Publish: /devices/reconnect-test-1/controls/I2/meta/readonly: '0' (QoS 1, retained)
Publish: /devices/reconnect-test-1/controls/I2/meta/type: 'value' (QoS 1, retained)
Publish: /devices/reconnect-test-1/controls/I2: '0' (QoS 1, retained)
Subscribe: /devices/reconnect-test-1/controls/I2/on (QoS 0)
Subscribe: /devices/reconnect-test-1/controls/# (QoS 0)
(retain) -> /devices/reconnect-test-1/controls/I1: '0' (QoS 1, retained)
(retain) -> /devices/reconnect-test-1/controls/I1/meta: '{"order":1,"readonly":false,"type":"value"}' (QoS 1, retained)
(retain) -> /devices/reconnect-test-1/controls/I1/meta/order: '1' (QoS 1, retained)
(retain) -> /devices/reconnect-test-1/controls/I1/meta/readonly: '0' (QoS 1, retained)
(retain) -> /devices/reconnect-test-1/controls/I1/meta/type: 'value' (QoS 1, retained)
(retain) -> /devices/reconnect-test-1/controls/I2: '0' (QoS 1, retained)
(retain) -> /devices/reconnect-test-1/controls/I2/meta: '{"order":2,"readonly":false,"type":"value"}' (QoS 1, retained)
(retain) -> /devices/reconnect-test-1/controls/I2/meta/order: '2' (QoS 1, retained)
(retain) -> /devices/reconnect-test-1/controls/I2/meta/readonly: '0' (QoS 1, retained)
(retain) -> /devices/reconnect-test-1/controls/I2/meta/type: 'value' (QoS 1, retained)
Unsubscribe -- serial-client-integration-test: /devices/reconnect-test-1/controls/#
Publish: /devices/reconnect-test-2/meta: '{"driver":"serial-client-integration-test","title":{"en":"Reconnect test 2"}}' (QoS 1, retained)
Publish: /devices/reconnect-test-2/meta/driver: 'serial-client-integration-test' (QoS 1, retained)
Publish: /devices/reconnect-test-2/meta/error: '' (QoS 1, retained)
Publish: /devices/reconnect-test-2/meta/name: 'Reconnect test 2' (QoS 1, retained)
Publish: /devices/reconnect-test-2/controls/I1/meta: '{"order":1,"readonly":false,"type":"value"}' (QoS 1, retained)
Publish: /devices/reconnect-test-2/controls/I1/meta/error: '' (QoS 1, retained)
Publish: /devices/reconnect-test-2/controls/I1/meta/order: '1' (QoS 1, retained)
Publish: /devices/reconnect-test-2/controls/I1/meta/readonly: '0' (QoS 1, retained)
Publish: /devices/reconnect-test-2/controls/I1/meta/type: 'value' (QoS 1, retained)
Publish: /devices/reconnect-test-2/controls/I1: '0' (QoS 1, retained)
Subscribe: /devices/reconnect-test-2/controls/I1/on (QoS 0)
Publish: /devices/reconnect-test-2/controls/I2/meta: '{"order":2,"readonly":false,"type":"value"}' (QoS 1, retained)
Publish: /devices/reconnect-test-2/controls/I2/meta/error: '' (QoS 1, retained)
Publish: /devices/reconnect-test-2/controls/I2/meta/order: '2' (QoS 1, retained)
Publish: /devices/reconnect-test-2/controls/I2/meta/readonly: '0' (QoS 1, retained)
Publish: /devices/reconnect-test-2/controls/I2/meta/type: 'value' (QoS 1, retained)
Publish: /devices/reconnect-test-2/controls/I2: '0' (QoS 1, retained)
Subscribe: /devices/reconnect-test-2/controls/I2/on (QoS 0)
Subscribe: /devices/reconnect-test-2/controls/# (QoS 0)
(retain) -> /devices/reconnect-test-2/controls/I1: '0' (QoS 1, retained)
(retain) -> /devices/reconnect-test-2/controls/I1/meta: '{"order":1,"readonly":false,"type":"value"}' (QoS 1, retained)
(retain) -> /devices/reconnect-test-2/controls/I1/meta/order: '1' (QoS 1, retained)
(retain) -> /devices/reconnect-test-2/controls/I1/meta/readonly: '0' (QoS 1, retained)
(retain) -> /devices/reconnect-test-2/controls/I1/meta/type: 'value' (QoS 1, retained)
(retain) -> /devices/reconnect-test-2/controls/I2: '0' (QoS 1, retained)
(retain) -> /devices/reconnect-test-2/controls/I2/meta: '{"order":2,"readonly":false,"type":"value"}' (QoS 1, retained)
(retain) -> /devices/reconnect-test-2/controls/I2/meta/order: '2' (QoS 1, retained)
(retain) -> /devices/reconnect-test-2/controls/I2/meta/readonly: '0' (QoS 1, retained)
(retain) -> /devices/reconnect-test-2/controls/I2/meta/type: 'value' (QoS 1, retained)
Unsubscribe -- serial-client-integration-test: /devices/reconnect-test-2/controls/#
>>> LoopOnce() [first start]
Open()
Sleep(150000)
fake_serial_device '12': write to address '1' value '42'
fake_serial_device '12': write to address '2' value '24'
fake_serial_device '12': transfer OK
fake_serial_device '12': reconnected
fake_serial_device '12': read address '1' value '42'
fake_serial_device '12': read address '2' value '24'
Publish: /devices/reconnect-test-1/controls/I1: '0.042' (QoS 1, retained)
Publish: /devices/reconnect-test-1/controls/I2: '0.024' (QoS 1, retained)
Sleep(150000)
fake_serial_device '13': write to address '1' value '32'
fake_serial_device '13': write to address '2' value '64'
fake_serial_device '13': transfer OK
fake_serial_device '13': reconnected
fake_serial_device '13': read address '1' value '32'
fake_serial_device '13': read address '2' value '64'
Publish: /devices/reconnect-test-2/controls/I1: '0.032' (QoS 1, retained)
Publish: /devices/reconnect-test-2/controls/I2: '0.064' (QoS 1, retained)
>>> LoopOnce()
Sleep(150000)
fake_serial_device '12': read address '1' value '42'
fake_serial_device '12': read address '2' value '24'
Sleep(150000)
fake_serial_device '13': read address '1' value '32'
fake_serial_device '13': read address '2' value '64'
>>> SimulateDisconnect(true)
>>> LoopOnce()
Sleep(150000)
fake_serial_device '12': read address '1' failed: 'Serial protocol error: device disconnected'
fake_serial_device '12': transfer FAIL
fake_serial_device '12': read address '2' failed: 'Serial protocol error: device disconnected'
fake_serial_device '12': transfer FAIL
Publish: /devices/reconnect-test-1/controls/I1/meta/error: 'r' (QoS 1, retained)
Publish: /devices/reconnect-test-1/controls/I2/meta/error: 'r' (QoS 1, retained)
Sleep(150000)
fake_serial_device '13': read address '1' value '32'
fake_serial_device '13': read address '2' value '64'
>>> LoopOnce()
Sleep(150000)
fake_serial_device '12': read address '1' failed: 'Serial protocol error: device disconnected'
fake_serial_device '12': transfer FAIL
fake_serial_device '12': read address '2' failed: 'Serial protocol error: device disconnected'
fake_serial_device '12': transfer FAIL
Sleep(150000)
fake_serial_device '13': read address '1' value '32'
fake_serial_device '13': read address '2' value '64'
>>> LoopOnce()
Sleep(150000)
fake_serial_device '12': read address '1' failed: 'Serial protocol error: device disconnected'
fake_serial_device '12': transfer FAIL
fake_serial_device '12': disconnected
fake_serial_device '12': read address '2' failed: 'Serial protocol error: device disconnected'
fake_serial_device '12': transfer FAIL
Publish: /devices/reconnect-test-1/meta/error: 'r' (QoS 1, retained)
Sleep(150000)
fake_serial_device '13': read address '1' value '32'
fake_serial_device '13': read address '2' value '64'
>>> LoopOnce() (limited polling expected)
Sleep(150000)
fake_serial_device '12': write address '1' failed: 'Serial protocol error: device disconnected'
fake_serial_device '12': transfer FAIL
Sleep(150000)
fake_serial_device '13': read address '1' value '1'
fake_serial_device '13': read address '2' value '2'
Publish: /devices/reconnect-test-2/controls/I1: '0.001' (QoS 1, retained)
Publish: /devices/reconnect-test-2/controls/I2: '0.002' (QoS 1, retained)
>>> SimulateDisconnect(false)
>>> LoopOnce()
Sleep(150000)
fake_serial_device '12': write to address '1' value '42'
fake_serial_device '12': write to address '2' value '24'
fake_serial_device '12': transfer OK
fake_serial_device '12': reconnected
fake_serial_device '12': read address '1' value '42'
fake_serial_device '12': read address '2' value '24'
Publish: /devices/reconnect-test-1/controls/I1/meta/error: '' (QoS 1, retained)
Publish: /devices/reconnect-test-1/controls/I2/meta/error: '' (QoS 1, retained)
Publish: /devices/reconnect-test-1/meta/error: '' (QoS 1, retained)
Sleep(150000)
fake_serial_device '13': read address '1' value '1'
fake_serial_device '13': read address '2' value '2'
Close()
stop: serial-client-integration-test
